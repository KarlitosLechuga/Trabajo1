{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Registro</title>
  {% block stylesheet %}
  <link rel="stylesheet" href="{% static 'css/carrito.css' %}">
  <link rel="stylesheet" href="{% static 'css/registro.css' %}">
  {% endblock stylesheet %}
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=PT+Sans+Caption&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-aFq/bzH65dt+w6FI2ooMVUpc+21e0SRygnTpmBvdBgSdnuTN7QbdgL+OapgHtvPp" crossorigin="anonymous">
  <!-- <link rel="stylesheet" href="css/Carrusel.css"> -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-aFq/bzH65dt+w6FI2ooMVUpc+21e0SRygnTpmBvdBgSdnuTN7QbdgL+OapgHtvPp" crossorigin="anonymous">
  <link rel="icon" href="{% static 'img/logo-glock.png' %}">
  
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script language="javascript" type="text/javascript"src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.10.0/jquery.validate.min.js"></script>
  <script language="javascript" type="text/javascript" src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.2/dist/additional-methods.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.min.js" integrity="sha384-heAjqF+bCxXpCWLa6Zhcp4fu20XoNIA98ecBC1YkdXhszjoejr5y9Q77hIrv8R9i" crossorigin="anonymous"></script>
</head>
<body>
  
  {% comment %} <script src="js/nav.js"></script> {% endcomment %}
  <div class="card text-center" >
      
    <div class="card-header" id="targett-div">
      {% include 'nav_bar.html' %}
    </div> 
          
  </div> 


  <form method="POST" id="formulario1" action="/usuarios/registro" enctype="multipart/form-data">
    {% csrf_token %}
    <h1 class="title">Registro</h1>
    <p class="mensaje-registro">{{ message }}</p>
    <table>
        <div class="form-group">
          <tr>
              <label for="id_txtRut">Rut</label>
              <input type="text" name="txtRut" class="form-control" id="id_txtRut" placeholder="1234567-8" pattern="\d{1,8}-\d{1}" title="El formato debe ser 12345678-9"/>
          </tr>
        </div>
        <tr>
          <td>
            
            <label for="id_txtNombre">Nombre</label>
          </td>
          <td><input type="text" name="txtNombre" class="form-control" id="id_txtNombre"  placeholder="Name" />
          </td>
      </tr>
      <tr>
          <td>
            <label for="id_txtApellido">Apellido</label>
          </td>
          <td>
            <input type="text" name="txtApellido" class="form-control" id="id_txtApellido"  placeholder="Last name" />
          </td>
      </tr>
      <tr>
        <td>
          <label for="id_txtApellido">Usuario</label>
        </td>
        <td>
          <input type="text" name="txtUsuario" class="form-control" id="id_txtUsuario"  placeholder="User" />
        </td>
      </tr>
      <div class="form-group">
          <tr>
            <td>
              <label for="id_txtEmail">Email</label>
            </td>
            <td><input type="email" name="txtEmail" class="form-control" id="id_txtEmail" aria-describedby="emailHelp" placeholder="E-mail"></td>
          </tr>
        </div>
        <div class="form-group">
          <tr>
            <td>
              <label for="id_txtdireccion">Dirección</label>
            <td><textarea name="txtDireccion" class="form-control" placeholder="Adress" id="id_txtdireccion" ></textarea>
            </td>
        </tr>
        </div>
        <div>
          <tr>
            <td>
              <label for="id_txtSub">Con Subscripcion</label>
              <td><input type="checkbox" id="id_txtSub" name="chSubscripcion" value="1"> Deseo subscribirme con un aporte de $5000 mensuales y obtener un 5% de descuento en mis compras
            </td>
          </tr>
      </div>
        <div>
          <tr>
              <td><label>Contraseña</label></td>
              <td><input type="password" name="txtContrasena" class="form-control"  placeholder="Password" id="id_txtContrasena"></td>
              <p class="mensaje-registro">{{ mensage_contrasena }}</p>
              
          </tr>
        </div>
        <div>
          <tr>
              <td><label>Repetir Contraseña</label></td>
              <td><input type="password" name="txtRepetirContrasena" class="form-control" placeholder="Password" id="id_txtRepetirContrasena" />
              <p class="mensaje-registro">{{ mensage_contrasena }}</p>
              </td>
          </tr>
      </div>
      <div>
          <tr>
            <td><label name="subida-imagenes" type="POST" enctype="multipart/formdata"></label></td>
            <td><input type="file" name="txtimagen"></td>
          </tr>
      </div>
    </table>      
    <button type="submit" class="btn btn-primary" id="Guardar">Guardar</button>
    <button type="submit" class="btn btn-primary" id="limpiar">Limpiar</button>
  </form>
 <!-- y empieza el footer -->
 <div class="target-div" id="target-div">
  {% include 'footer.html' %}
</div>
{% comment %} <script src="js/footer.js"></script> {% endcomment %}
  {% comment %} <script src="{% static 'js/registro.js' %}"></script> {% endcomment %}
  <script>
    $(document).ready(function() {
      // Inicializa el formulario para la validación
      $("#formulario1").validate({
        rules: {
          txtRut: "required", // Agrega regla de validación para el campo txtRut
          txtNombre: "required",
          txtApellido: "required",
          txtUsuario: "required",
          txtDireccion: "required",
          txtEmail: "required",
          txtContrasena: "required",
          txtRepetirContrasena: "required",
          // Agrega más reglas de validación para otros campos obligatorios si es necesario
        },
        messages: {
          txtRut: "Este campo es obligatorio.", // Mensaje de error para el campo txtRut
          txtNombre: "Este campo es obligatorio.",
          txtApellido: "Este campo es obligatorio.",
          txtUsuario: "Este campo es obligatorio.",
          txtDireccion: "Este campo es obligatorio.",
          txtEmail: "Este campo es obligatorio.",
          txtContrasena: "Este campo es obligatorio.",
          
          // Agrega más mensajes de error para otros campos obligatorios si es necesario
        },
        errorPlacement: function(error, element) {
          error.appendTo(element.parent()); // Muestra los mensajes de error debajo de cada campo
        }
      });
  
      // Escucha el evento 'click' del botón "Guardar"
      $("#Guardar").on("click", function(e) {
        if (!$("#formulario1").valid()) {
          e.preventDefault(); // Evita que se envíe el formulario si hay errores
        }
      });
    });
  </script>
  

  <!-- aqui termina el footer -->
</body>
</html>